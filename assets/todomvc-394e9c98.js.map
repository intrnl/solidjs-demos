{"version":3,"file":"todomvc-394e9c98.js","sources":["../../src/todomvc/app.jsx"],"sourcesContent":["import { For, Show, createEffect, createMemo, createSignal } from 'solid-js';\nimport { render } from 'solid-js/web';\n\nimport './style.css';\n\nfunction App () {\n\tconst ENTER_KEY = 13;\n\tconst ESCAPE_KEY = 27;\n\n\tconst filters = {\n\t\tall: (items) => items,\n\t\tactive: (items) => items.filter((item) => !item.completed),\n\t\tcompleted: (items) => items.filter((item) => item.completed),\n\t};\n\n\tconst [items, setItems] = createSignal([]);\n\tconst [visibility, setVisibility] = createSignal('all');\n\tconst [editing, setEditing] = createSignal(null);\n\n\tconst filteredItems = createMemo(() => filters[visibility()](items()));\n\tconst remaining = createMemo(() => filters.active(items()).length);\n\n\tconst toggleAll = (event) => {\n\t\tsetItems(items().map((item) => ({ ...item, completed: event.target.value })));\n\t};\n\n\tconst clearCompleted = () => {\n\t\tsetItems(items().filter((item) => !item.completed));\n\t};\n\n\tconst addTodo = (event) => {\n\t\tif (event.which === ENTER_KEY) {\n\t\t\tsetItems(\n\t\t\t\titems().concat({\n\t\t\t\t\tid: Date.now(),\n\t\t\t\t\ttitle: event.target.value,\n\t\t\t\t\tcompleted: false,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tevent.target.value = '';\n\t\t}\n\t};\n\n\tconst removeTodo = (id) => {\n\t\tsetItems(items().filter((item) => item.id !== id));\n\t};\n\n\tconst editTodo = (next) => {\n\t\tconst nextItems = items().slice();\n\t\tconst index = nextItems.findIndex((item) => item.id === next.id);\n\n\t\tif (index !== -1) {\n\t\t\tnextItems[index] = { ...nextItems[index], ...next };\n\t\t\tsetItems(nextItems);\n\t\t}\n\t};\n\n\tconst toggleTodo = (id, event) => {\n\t\teditTodo({ id, completed: event.target.checked });\n\t};\n\n\tconst handleEdit = (event) => {\n\t\tif (event.which === ENTER_KEY) {\n\t\t\tevent.target.blur();\n\t\t}\n\t\telse if (event.which === ESCAPE_KEY) {\n\t\t\tsetEditing(null);\n\t\t}\n\t};\n\n\tconst handleSubmit = (event) => {\n\t\teditTodo({ id: editing(), title: event.target.value });\n\t\tediting.value = null;\n\t};\n\n\tconst updateView = () => {\n\t\tlet route = window.location.hash.replace(/#\\/?/, '');\n\n\t\tif (!filters[route]) {\n\t\t\troute = 'all';\n\t\t}\n\n\t\tsetVisibility(route);\n\t};\n\n\twindow.addEventListener('hashchange', updateView);\n\tupdateView();\n\n\treturn (\n\t\t<>\n\t\t\t<header class='header'>\n\t\t\t\t<h1>todos</h1>\n\t\t\t\t<input onKeyDown={addTodo} placeholder='What needs to be done' className='new-todo' autoFocus />\n\t\t\t</header>\n\n\t\t\t<Show when={items().length > 0}>\n\t\t\t\t<section class='main'>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='toggle-all'\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={remaining() === 0}\n\t\t\t\t\t\tonChange={toggleAll}\n\t\t\t\t\t\tclassName='toggle-all'\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor='toggle-all'>Mark all as complete</label>\n\n\t\t\t\t\t<ul class='todo-list'>\n\t\t\t\t\t\t<For each={filteredItems()}>\n\t\t\t\t\t\t\t{(item) => (\n\t\t\t\t\t\t\t\t<li class='todo' classList={{ completed: item.completed, editing: editing() === item.id }}>\n\t\t\t\t\t\t\t\t\t<div className='view'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\t\tchecked={item.completed}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => toggleTodo(item.id, event)}\n\t\t\t\t\t\t\t\t\t\t\tclassName='toggle'\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t<label onDblClick={() => setEditing(item.id)}>\n\t\t\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => removeTodo(item.id)} className='destroy'></button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<Show when={editing() === item.id}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tref={(target) => setTimeout(() => target.focus(), 0)}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={item.title}\n\t\t\t\t\t\t\t\t\t\t\tonKeyDown={handleEdit}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\tclass='edit'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Show>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</For>\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<footer className='footer'>\n\t\t\t\t\t\t<span className='todo-count'>\n\t\t\t\t\t\t\t<strong>{remaining}</strong> {remaining() === 1 ? 'item' : 'items'} left\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<ul className='filters'>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a classList={{ selected: visibility() === 'all' }} href='#/'>\n\t\t\t\t\t\t\t\t\tAll\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a classList={{ selected: visibility() === 'active' }} href='#/active'>\n\t\t\t\t\t\t\t\t\tActive\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a classList={{ selected: visibility() === 'completed' }} href='#/completed'>\n\t\t\t\t\t\t\t\t\tCompleted\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t<Show when={items().length > remaining()}>\n\t\t\t\t\t\t\t<button className='clear-completed' onClick={clearCompleted}>\n\t\t\t\t\t\t\t\tClear completed\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Show>\n\t\t\t\t\t</footer>\n\t\t\t\t</section>\n\t\t\t</Show>\n\t\t</>\n\t);\n}\n\nrender(() => <App />, document.getElementById('root'));\n"],"names":["App","filters","all","items","active","filter","item","completed","setItems","createSignal","visibility","setVisibility","editing","setEditing","filteredItems","createMemo","remaining","length","toggleAll","event","map","target","value","clearCompleted","addTodo","which","concat","id","Date","now","title","editTodo","next","nextItems","slice","index","findIndex","handleEdit","blur","handleSubmit","updateView","route","window","location","hash","replace","addEventListener","_el$","_tmpl$","firstChild","nextSibling","$$keydown","_$createComponent","Show","when","children","_el$4","_tmpl$3","_el$5","_el$7","_el$8","_el$9","_el$10","_el$13","_el$15","_el$16","_el$17","_el$18","_el$20","_$insert","For","each","_el$22","_tmpl$5","_el$24","_el$25","_el$26","toggleTodo","checked","$$dblclick","$$click","removeTodo","_el$27","_tmpl$4","_$use","setTimeout","focus","_$effect","_$setAttribute","_p$","_v$4","_v$5","classList","toggle","undefined","_el$21","_tmpl$2","_v$","_v$2","_v$3","render","document","getElementById","_$delegateEvents"],"mappings":"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"}