var t=100,e=function(t,e,n,i){this.min=t,this.max=e,this.mean=n,this.last=i},n=function(){function t(t){this.samples=[],this.maxSamples=t,this._i=-1}return t.prototype.addSample=function(t){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=t},t.prototype.each=function(t){for(var e=this.samples,n=0;n<e.length;n++)t(e[(this._i+1+n)%e.length],n)},t.prototype.calc=function(){var t=this.samples;if(0===t.length)return new e(0,0,0,0);for(var n=t[(this._i+1)%t.length],i=n,a=0,s=0;s<t.length;s++){var o=t[(this._i+1+s)%t.length];o<n&&(n=o),o>i&&(i=o),a+=o}var l=t[this._i],r=a/t.length;return new e(n,i,r,l)},t}(),i=[],a=-1;var s,o,l=(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(){function t(t){var e=this;this._sync=function(){e.sync(),e._dirty=!1},this.name=t,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return t.prototype.invalidate=function(){var t;this._dirty||(this._dirty=!0,t=this._sync,i.push(t),-1===a&&requestAnimationFrame((function(t){a=-1;var e=i;i=[];for(var n=0;n<e.length;n++)e[n]()})))},t.prototype.sync=function(){throw new Error("sync method not implemented")},t}();!function(t){t[t.HideMin=1]="HideMin",t[t.HideMax=2]="HideMax",t[t.HideMean=4]="HideMean",t[t.HideLast=8]="HideLast",t[t.HideGraph=16]="HideGraph",t[t.RoundValues=32]="RoundValues"}(o||(o={}));var d=function(t){function e(e,n,i,a){var s=t.call(this,e)||this;s.flags=n,s.unitName=i,s.samples=a;var l=document.createElement("div");l.style.cssText="text-align: center",l.textContent=s.name;var r=document.createElement("div");return 0==(n&o.HideMin)?(s.minText=document.createElement("div"),r.appendChild(s.minText)):s.minText=null,0==(n&o.HideMax)?(s.maxText=document.createElement("div"),r.appendChild(s.maxText)):s.maxText=null,0==(n&o.HideMean)?(s.meanText=document.createElement("div"),r.appendChild(s.meanText)):s.meanText=null,0==(n&o.HideLast)?(s.lastText=document.createElement("div"),r.appendChild(s.lastText)):s.lastText=null,s.element.appendChild(l),s.element.appendChild(r),0==(n&o.HideGraph)?(s.canvas=document.createElement("canvas"),s.canvas.style.cssText="display: block; padding: 0; margin: 0",s.canvas.width=100,s.canvas.height=30,s.ctx=s.canvas.getContext("2d"),s.element.appendChild(s.canvas)):(s.canvas=null,s.ctx=null),s}return l(e,t),e.prototype.sync=function(){var t,e,n,i,a=this,s=this.samples.calc(),l=30/(1.2*s.max);0==(this.flags&o.RoundValues)?(t=s.min.toFixed(2),e=s.max.toFixed(2),n=s.mean.toFixed(2),i=s.last.toFixed(2)):(t=Math.round(s.min).toString(),e=Math.round(s.max).toString(),n=Math.round(s.mean).toString(),i=Math.round(s.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+t+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+e+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+i+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,100,30),this.ctx.fillStyle="#0f0",this.samples.each((function(t,e){a.ctx.fillRect(e,30,1,-t*l)})))},e}(r);!function(t){function e(e,n){var i=t.call(this,e)||this;return i.counter=n,i.text=document.createElement("div"),i.element.appendChild(i.text),i}l(e,t),e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(r);var c=null;function m(){c||((c=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(c))}function h(e){void 0===e&&(e=o.HideMin|o.HideMax|o.HideMean|o.RoundValues),m();var i=new n(t),a=new d("FPS",e,"",i);c.appendChild(a.element);var s=0,l=60;requestAnimationFrame((function t(e){s>0&&(l+=.01652892561983471*(1e3/(e-s)-l)),s=e,i.addSample(l),a.invalidate(),requestAnimationFrame(t)}))}function u(e){if(void 0===e&&(e=o.HideMin|o.HideMean),m(),void 0!==performance.memory){var i=new n(t),a=new d("Memory",e,"MB",i);c.appendChild(a.element),function t(){i.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),a.invalidate(),setTimeout(t,30)}()}}var p=function(e,i,a){this.data=new n(t),this.widget=new d(e,a,i,this.data),this.startTime=-1},x={};function f(t,e){void 0===e&&(e=0),m();var n=x[t];void 0===n&&(x[t]=n=new p(t,"ms",e),c.appendChild(n.widget.element))}function v(t){var e=x[t];void 0!==e&&(e.startTime=performance.now())}function y(t){var e=performance.now(),n=x[t];void 0!==n&&-1!==n.startTime&&(n.data.addSample(e-n.startTime),n.widget.invalidate())}export{u as a,v as b,y as e,f as i,h as s};
//# sourceMappingURL=perf-monitor-5bf4888d.js.map
